/**
 * \file scannerWidget.cpp
 * \attention This file is automatically generated and should not be in general modified manually
 *
 * \date MMM DD, 20YY
 * \author autoGenerator
 */

#include "scannerWidget.h"
#include "ui_scannerWidget.h"
#include "qSettingsGetter.h"
#include "qSettingsSetter.h"

ScannerWidget::ScannerWidget(QWidget *parent)
    : QWidget(parent)
    , mUi(new Ui::ScannerWidget)
{
    mUi->setupUi(this);

    Scanner *params = createParameters();
    SettingsGetter visitor("cvs.conf");
    params->accept<SettingsGetter>(visitor);
    setParameters(*params);
    delete params;

    QObject::connect(mUi->pathEdit, SIGNAL(textEdited(QString)), this, SIGNAL(paramsChanged()));
    QObject::connect(mUi->fileTemplateEdit, SIGNAL(textEdited(QString)), this, SIGNAL(paramsChanged()));
}

ScannerWidget::~ScannerWidget()
{
    Scanner *params = createParameters();
    SettingsSetter visitor("cvs.conf");
    params->accept<SettingsSetter>(visitor);
    setParameters(*params);
    delete params;

    delete mUi;
}

Scanner *ScannerWidget::createParameters() const
{
    return new Scanner(
          mUi->pathEdit->text().toStdString()
        , mUi->fileTemplateEdit->text().toStdString()
    );
}

void ScannerWidget::setParameters(const Scanner &input)
{
    mUi->pathEdit->setText(input.path().c_str());
    mUi->fileTemplateEdit->setText(input.fileTemplate().c_str());
}
